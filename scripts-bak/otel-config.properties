# OpenTelemetry Java Agent 配置文件
# 专门针对 Kafka 消息体捕获优化

# 服务配置
otel.service.name=hypertrace-demo
otel.resource.attributes=service.name=hypertrace-demo,service.version=1.0.0

# 导出配置
otel.traces.exporter=otlp
otel.exporter.otlp.protocol=grpc
otel.exporter.otlp.endpoint=http://localhost:4317
otel.propagators=tracecontext,baggage,b3
otel.traces.sampler=always_on
otel.metrics.exporter=none
otel.logs.exporter=none

# Kafka 相关配置
otel.instrumentation.kafka.enabled=true
otel.instrumentation.spring-kafka.enabled=true
otel.instrumentation.messaging.enabled=true
otel.instrumentation.kafka-clients.enabled=true
otel.instrumentation.kafka.consumer.enabled=true
otel.instrumentation.kafka.producer.enabled=true

# 实验性功能：消息体捕获
otel.instrumentation.messaging.experimental.receive-telemetry.enabled=true
otel.instrumentation.messaging.experimental.capture-payload.enabled=true
otel.instrumentation.kafka.experimental.capture-payload.enabled=true

# 消息头捕获
otel.instrumentation.kafka.producer.capture-headers=all
otel.instrumentation.kafka.consumer.capture-headers=all

# 消息体大小限制
otel.instrumentation.messaging.capture-payload-body-size=8192
otel.instrumentation.kafka.experimental.capture-payload-body-size=8192

# 数据库相关配置 - 已禁用
otel.instrumentation.jdbc.enabled=false
otel.instrumentation.jpa.enabled=false
otel.instrumentation.hibernate.enabled=false

# HTTP 相关配置
otel.instrumentation.spring-web.enabled=true
otel.instrumentation.spring-webmvc.enabled=true
